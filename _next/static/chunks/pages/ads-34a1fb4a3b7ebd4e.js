(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{8286:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ads",function(){return a(5311)}])},5311:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var i=a(5893),d=a(7294),r=a(5861),n=a(9417),l=a(5616),o=a(657),s=a(7645),u=a(6580),c=a(4808),h=a(8456),m=a(2453),p=a(1163),f=a(381),v=a.n(f),g=a(5121),w=a(2852),x=a(7918),_=a(6836);let C=(0,a(948).ZP)(e=>(0,i.jsx)(w.Z,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...e}))(e=>{let{theme:t}=e;return{width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:"dark"===t.palette.mode?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:"light"===t.palette.mode?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:13,backgroundColor:"light"===t.palette.mode?"#E9E9EA":"#39393D",opacity:1,transition:t.transitions.create(["background-color"],{duration:500})}}});var S=e=>{let{adData:t,onChangeLoading:a}=e,[r,n]=(0,d.useState)(!0),[o,s]=(0,d.useState)(!0),[u,c]=(0,d.useState)(!1),h=(0,d.useCallback)(async()=>{let{data:e}=await g.Z.post("http://54.173.40.227:3001/advertisers/fatigue-list",{advId:t.advertiser_id,adId:t.ad_id,startDate:v()().subtract(1,"months").format("YYYY-MM-DD"),endDate:v()().format("YYYY-MM-DD")});e.fatigueData.map(e=>{var t;(null==e?void 0:null===(t=e.metrics)||void 0===t?void 0:t.has_fatigue)==!0&&n(!1)}),"ENABLE"===t.operation_status?s(!0):s(!1)},[t.advertiser_id,t.ad_id,t.operation_status]);(0,d.useEffect)(()=>{h()},[h]);let m=(0,d.useCallback)(async()=>{a(!0);let e=await g.Z.post("http://54.173.40.227:3001/advertisers/ads_status",{acoAdIds:t.ad_id,advId:t.advertiser_id,operationStatus:!0===o?"DISABLE":"ENABLE"});console.log(o,e.data.success),!0===e.data.success&&s(!o),a(!1)},[a,t.ad_id,t.advertiser_id,o]);return(0,i.jsxs)(l.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[r?(0,i.jsx)(x.Z,{label:"Safe",color:"success"}):(0,i.jsx)(x.Z,{label:"Warning",color:"error"}),(0,i.jsx)(_.Z,{control:(0,i.jsx)(C,{sx:{m:1},checked:o,value:o,onChange:m})})]})},D=()=>{let e=(0,p.useRouter)(),[t,a]=(0,d.useState)([]),[f,w]=(0,d.useState)(!1),[x,_]=(0,d.useState)(!1),[C,D]=(0,d.useState)([]),M=(0,d.useCallback)(async()=>{var t;if(null==e?void 0:null===(t=e.query)||void 0===t?void 0:t.advId){_(!0);let{data:t}=await g.Z.get("http://54.173.40.227:3001/advertisers/".concat(e.query.advId,"/ads-list"));t.adData&&a(t.adData),_(!1)}},[e.query.advId]);(0,d.useEffect)(()=>{M()},[e,M]);let b=async(e,t)=>{_(!0);let{data:a}=await g.Z.post("http://54.173.40.227:3001/advertisers/fatigue-list",{advId:e,adId:t,startDate:v()().subtract(1,"months").format("YYYY-MM-DD"),endDate:v()().format("YYYY-MM-DD")});D(a.fatigueData),w(!0),_(!1)},N=[{field:"advertiser_id",headerName:"Advertiser Id",width:100},{field:"campaign_id",headerName:"Campaign Id",width:100},{field:"campaign_name",headerName:"Campaign Name",width:150},{field:"adgroup_id",headerName:"Adgroup Id",width:100},{field:"adgroup_name",headerName:"Adgroup Name",width:150},{field:"ad_id",headerName:"Ad Id",width:100},{field:"ad_name",headerName:"Ad Name",width:150},{field:"ad_text",headerName:"Ad Text",width:250},{field:"Fatigue",headerName:"Fatigue",width:100,renderCell:e=>{let{row:t}=e;return(0,i.jsx)(n.Z,{variant:"contained",sx:{textTransform:"none"},onClick:()=>b(t.advertiser_id,t.ad_id),children:"View"})}},{field:"Status",headerName:"Status",width:250,renderCell:e=>{let{row:t}=e;return(0,i.jsx)(S,{adData:t,onChangeLoading:_})}}];return(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(n.Z,{variant:"contained",onClick:()=>e.push("/"),sx:{mb:1},children:"Go to Home"}),(0,i.jsx)(m._$,{getRowHeight:()=>"auto",rows:t,columns:N,getRowId:e=>e.advertiser_id+e.ad_id,initialState:{pagination:{paginationModel:{pageSize:10}}},sx:{"& .MuiDataGrid-cell":{whiteSpace:"pre-wrap !important"},"& .MuiDataGrid-cellContent":{fontSize:"1rem"},"& .MuiDataGrid-columnHeaders":{fontSize:"1.1rem"},"& .MuiDataGrid-cellContent":{wordWrap:"break-word"}},pageSizeOptions:[10]}),(0,i.jsxs)(o.Z,{open:f,onClose:()=>{w(!1)},maxWidth:"lg",fullWidth:!0,children:[(0,i.jsx)(s.Z,{sx:{display:"flex",justifyContent:"space-between"},children:"Fatigue List"}),(0,i.jsx)(u.Z,{children:(0,i.jsx)(m._$,{rows:C,columns:[{field:"Date",headerName:"Date",width:130,renderCell:e=>{let{row:t}=e;return(0,i.jsx)(r.Z,{children:v()(null==t?void 0:t.date).format("YYYY-MM-DD")})}},{field:"Cost Per Conversion",headerName:"Cost Per Conversion",width:150,renderCell:e=>{var t;let{row:a}=e;return(0,i.jsx)(r.Z,{children:null==a?void 0:null===(t=a.metrics)||void 0===t?void 0:t.cost_per_conversion})}},{field:"Dnu",headerName:"Dnu",width:80,renderCell:e=>{var t;let{row:a}=e;return(0,i.jsx)(r.Z,{children:null==a?void 0:null===(t=a.metrics)||void 0===t?void 0:t.dnu})}},{field:"Ratio",headerName:"Ratio",width:80,renderCell:e=>{var t;let{row:a}=e;return(0,i.jsx)(r.Z,{children:null==a?void 0:null===(t=a.metrics)||void 0===t?void 0:t.dnu_ratio})}},{field:"Fatigue Index",headerName:"Fatigue Index",width:200,renderCell:e=>{var t;let{row:a}=e;return(0,i.jsx)(r.Z,{children:null==a?void 0:null===(t=a.metrics)||void 0===t?void 0:t.fatigue_index})}},{field:"Skan Cost Per Conversion",headerName:"Skan Cost Per Conversion",width:200,renderCell:e=>{var t;let{row:a}=e;return(0,i.jsx)(r.Z,{children:null==a?void 0:null===(t=a.metrics)||void 0===t?void 0:t.skan_cost_per_conversion})}},{field:"Spend",headerName:"Spend",width:100,renderCell:e=>{var t;let{row:a}=e;return(0,i.jsx)(r.Z,{children:null==a?void 0:null===(t=a.metrics)||void 0===t?void 0:t.spend})}},{field:"Has Fatigue",headerName:"Has Fatigue",width:150,renderCell:e=>{var t;let{row:a}=e;return(0,i.jsx)(r.Z,{children:(null==a?void 0:null===(t=a.metrics)||void 0===t?void 0:t.has_fatigue)?"True":"False"})}}],getRowId:e=>e.ad_id+e.date,initialState:{pagination:{paginationModel:{pageSize:10}}},sx:{"& .MuiDataGrid-cell":{whiteSpace:"pre-wrap !important"},"& .MuiDataGrid-cellContent":{fontSize:"1rem"},"& .MuiDataGrid-columnHeaders":{fontSize:"1.1rem"},"& .MuiDataGrid-cellContent":{wordWrap:"break-word"}},pageSizeOptions:[10]})})]}),(0,i.jsx)(c.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:x,children:(0,i.jsx)(h.Z,{color:"inherit"})})]})}}},function(e){e.O(0,[885,346,888,774,179],function(){return e(e.s=8286)}),_N_E=e.O()}]);